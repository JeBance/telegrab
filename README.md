# ü§ñ Telegrab v6.0 ‚Äî –ê—Ä—Ö–∏–≤–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π Telegram

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104%2B-green.svg)](https://fastapi.tiangolo.com)
[![Telethon](https://img.shields.io/badge/Telethon-1.42%2B-green.svg)](https://docs.telethon.dev)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![24/7](https://img.shields.io/badge/Works-24/7-brightgreen.svg)](https://github.com/JeBance/telegrab)

**Telegrab** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram-—á–∞—Ç–æ–≤. –†–∞–±–æ—Ç–∞–µ—Ç 24/7, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –∏ WebSocket –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Telegram](#–ø–æ–ª—É—á–µ–Ω–∏–µ-api-–∫–ª—é—á–µ–π-telegram)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [Database v6](#database-v6)
- [Production —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](#production-—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üì• **Real-time —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —á–∞—Ç–æ–≤ |
| üîî **WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö |
| üìö **–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏** | –ü–æ—ç—Ç–∞–ø–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å rate limiting |
| üîç **–ü–æ–∏—Å–∫** | –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º |
| üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–∞—Ç–∞–º |
| üöÄ **–†–∞–±–æ—Ç–∞ 24/7** | –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ |
| üåê **REST API** | HTTP API —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π (Swagger) |
| üé® **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| ü§ñ **UserBot —Ä–µ–∂–∏–º** | –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| ‚ö° **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** | –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å rate limiting |

### Database v6

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üóÑÔ∏è **RAW + Meta –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | –ü–æ–ª–Ω—ã–µ JSON –¥–∞–º–ø—ã + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ |
| üìé **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** | –¢–∞–±–ª–∏—Ü–∞ `files` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ |
| ‚úèÔ∏è **–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–π** | –¢–∞–±–ª–∏—Ü–∞ `message_edits` |
| üìÖ **–°–æ–±—ã—Ç–∏—è** | –¢–∞–±–ª–∏—Ü–∞ `message_events` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏–π |
| üìÅ **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —á–∞—Ç–æ–≤** | –¢–∞–±–ª–∏—Ü–∞ `chats` —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π |

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å v6

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üì∏ **–ì–∞–ª–µ—Ä–µ—è –º–µ–¥–∏–∞** | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ —Å –ø—Ä–µ–≤—å—é |
| üìÑ **–î–µ—Ç–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è** | RAW –¥–∞–Ω–Ω—ã–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–æ–±—ã—Ç–∏—è, —Ñ–∞–π–ª—ã |
| üîé **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫** | –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–µ, —Ç–∏–ø—É –º–µ–¥–∏–∞, —á–∞—Ç—É |
| üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞** | –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —á–∞—Ç—É |
| üíæ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ |
| üåì **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –≤ —Å—Ç–∏–ª–µ Telegram |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://my.telegram.org
2. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º
3. –í—ã–±–µ—Ä–∏—Ç–µ **API Development Tools**
4. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - **App title:** Telegrab
   - **Short name:** telegrab
   - **Platform:** Desktop
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **API ID** –∏ **API Hash**

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ

```bash
git clone https://github.com/JeBance/telegrab.git /opt/telegrab
cd /opt/telegrab
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ

```bash
cp .env.example .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
```ini
API_ID=12345678
API_HASH=abcdef1234567890abcdef1234567890
PHONE=+79991234567
API_PORT=3000
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
# –ó–∞–ø—É—Å–∫
python telegrab.py

# –ò–ª–∏ –≤ —Ñ–æ–Ω–µ
nohup python telegrab.py > /tmp/telegrab.log 2>&1 &
```

### 5. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/ui
2. –ù–∞–∂–º–∏—Ç–µ **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –ø–æ QR-–∫–æ–¥—É**
3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –≤ Telegram: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –†–µ—Å—É—Ä—Å | –ú–∏–Ω–∏–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
|--------|---------|---------------|
| CPU | 1 —è–¥—Ä–æ | 2 —è–¥—Ä–∞ |
| RAM | 512 MB | 1 GB |
| Disk | 5 GB | 20 GB SSD |
| OS | Ubuntu 20.04+ | Ubuntu 22.04 LTS |
| Python | 3.8+ | 3.10+ |

### –ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
sudo apt install -y python3 python3-pip python3-venv

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
sudo mkdir -p /opt/telegrab
sudo chown $USER:$USER /opt/telegrab
cd /opt/telegrab

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone https://github.com/JeBance/telegrab.git .

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade pip
pip install -r requirements.txt
```

---

## –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Telegram

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://my.telegram.org**
2. **–í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞** (–≤ —Ñ–æ—Ä–º–∞—Ç–µ +7...)
3. **–í—ã–±–µ—Ä–∏—Ç–µ "API Development Tools"**
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:**
   ```
   App title: Telegrab
   Short name: telegrab
   URL: (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)
   Platform: Desktop
   ```
5. **–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏:**
   - **API ID:** —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `12345678`)
   - **API Hash:** 32 —Å–∏–º–≤–æ–ª–∞

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª .env

```bash
cp .env.example .env
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```ini
API_ID=12345678
API_HASH=abcdef1234567890abcdef1234567890
PHONE=+79991234567
API_KEY=          # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
API_PORT=3000
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏:**
```ini
AUTO_LOAD_HISTORY=true
HISTORY_LIMIT_PER_CHAT=200
MAX_CHATS_TO_LOAD=20
AUTO_LOAD_MISSED=true
MISSED_LIMIT_PER_CHAT=500
MISSED_DAYS_LIMIT=7
```

**Rate limiting:**
```ini
REQUESTS_PER_SECOND=1
MESSAGES_PER_REQUEST=100
JOIN_CHAT_TIMEOUT=10
```

### –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python telegrab.py`
2. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/ui
3. –í–≤–µ–¥–∏—Ç–µ API_ID, API_HASH, PHONE
4. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥

### –ß–µ—Ä–µ–∑ Docker Compose

```yaml
version: '3.8'
services:
  telegrab:
    build: .
    container_name: telegrab
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
      - ./.env:/app/.env:ro
```

```bash
docker-compose up -d
```

---

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**URL:** http://localhost:3000/ui

### –í–∫–ª–∞–¥–∫–∏

| –í–∫–ª–∞–¥–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–û–±–∑–æ—Ä** | –î–∞—à–±–æ—Ä–¥ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é |
| **–ß–∞—Ç—ã Telegram** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏, –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ |
| **–°–æ–æ–±—â–µ–Ω–∏—è** | –ü—Ä–æ—Å–º–æ—Ç—Ä —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –¥–µ—Ç–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è |
| **–ó–∞–¥–∞—á–∏** | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **–ü–æ–∏—Å–∫** | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º |
| **–ì–∞–ª–µ—Ä–µ—è** | –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ |
| **–§–∞–π–ª—ã** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |

### –î–µ—Ç–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

–ö–ª–∏–∫ –Ω–∞ —Å—Ç—Ä–æ–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å:
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** —á–∞—Ç, ID, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, –¥–∞—Ç–∞, —Ç–µ–∫—Å—Ç
- **–í–∫–ª–∞–¥–∫–∞ RAW:** –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–í–∫–ª–∞–¥–∫–∞ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–í–∫–ª–∞–¥–∫–∞ –°–æ–±—ã—Ç–∏—è:** —É–¥–∞–ª–µ–Ω–∏—è, –ø–µ—Ä–µ—Å—ã–ª–∫–∏
- **–í–∫–ª–∞–¥–∫–∞ –§–∞–π–ª—ã:** –≥–∞–ª–µ—Ä–µ—è –º–µ–¥–∏–∞, —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

### –ì–∞–ª–µ—Ä–µ—è –º–µ–¥–∏–∞

- –§–æ—Ç–æ/–≤–∏–¥–µ–æ/GIF –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Å–µ—Ç–∫–∞ –ø—Ä–µ–≤—å—é
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ —Ç–∞–±–ª–∏—Ü–µ
- –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —á–∞—Ç—É –∏ —Ç–∏–ø—É –º–µ–¥–∏–∞

---

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ë–∞–∑–æ–≤—ã–π URL:** http://localhost:3000

**Swagger UI:** http://localhost:3000/docs

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á:
```
X-API-Key: –≤–∞—à_api_key
```

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ |
| `GET` | `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞—Ä—Ö–∏–≤–∞ |
| `GET` | `/chats` | –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∏–∑ –ë–î |
| `GET` | `/dialogs` | –î–∏–∞–ª–æ–≥–∏ –∏–∑ Telegram |
| `GET` | `/tracked_chats` | –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —á–∞—Ç—ã |
| `POST` | `/tracked_chats` | –î–æ–±–∞–≤–∏—Ç—å —á–∞—Ç |
| `GET` | `/messages` | –°–æ–æ–±—â–µ–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |
| `GET` | `/search` | –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º |
| `POST` | `/load` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é |
| `POST` | `/clear_chat/{id}` | –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç –∏–∑ –ë–î |
| `GET` | `/task/{id}` | –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ |
| `GET` | `/queue` | –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ |
| `GET` | `/config` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `POST` | `/config` | –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `GET` | `/telegram_status` | –°—Ç–∞—Ç—É—Å Telegram |
| `GET` | `/qr_login` | –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥ |
| `WS` | `/ws` | WebSocket –¥–ª—è real-time |

### Database v6 endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/message_raw` | RAW –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `GET` | `/message_edits` | –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–π |
| `GET` | `/message_events` | –°–æ–±—ã—Ç–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è |
| `GET` | `/files/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–æ–≤ |
| `GET` | `/files` | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ |
| `GET` | `/chat_stats/{id}` | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞ |
| `POST` | `/search_advanced` | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ |
| `GET` | `/media_gallery` | –ì–∞–ª–µ—Ä–µ—è –º–µ–¥–∏–∞ |
| `GET` | `/media/{chat_id}/{msg_id}` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ |

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl -H "X-API-Key: key" http://localhost:3000/stats

# –°–æ–æ–±—â–µ–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
curl -H "X-API-Key: key" \
  "http://localhost:3000/messages?chat_id=-1001234567890&limit=50"

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
curl -X POST -H "X-API-Key: key" \
  "http://localhost:3000/search_advanced?query=bitcoin&media_type=photo"

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
curl -H "X-API-Key: key" \
  -O file.jpg \
  "http://localhost:3000/media/-1001234567890/12345"
```

---

## Database v6

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```
telegrab_v6.db
‚îú‚îÄ‚îÄ chats              # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —á–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ messages_raw       # RAW JSON –¥–∞–º–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ message_meta       # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ files              # –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ message_files      # –°–≤—è–∑—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ñ–∞–π–ª–∞–º–∏
‚îú‚îÄ‚îÄ message_edits      # –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–π
‚îú‚îÄ‚îÄ message_events     # –°–æ–±—ã—Ç–∏—è (—É–¥–∞–ª–µ–Ω–∏—è, etc.)
‚îú‚îÄ‚îÄ chat_loading_status # –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–æ–≤
‚îî‚îÄ‚îÄ tracked_chats      # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —á–∞—Ç—ã
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ v6

1. **RAW –¥–∞–Ω–Ω—ã–µ** ‚Äî –ø–æ–ª–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Telegram
2. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
3. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
4. **–ò—Å—Ç–æ—Ä–∏—è** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π
5. **–°–æ–±—ã—Ç–∏—è** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π –∏ –ø–µ—Ä–µ—Å—ã–ª–æ–∫

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π –ë–î

–°—Ç–∞—Ä–∞—è –ë–î `telegrab.db` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `telegrab_v6.db`.

---

## Production —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Systemd —Å–µ—Ä–≤–∏—Å

**1. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å:**
```bash
sudo nano /etc/systemd/system/telegrab.service
```

**2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```ini
[Unit]
Description=Telegrab Telegram Archiver
After=network.target

[Service]
Type=simple
User=telegrab
WorkingDirectory=/opt/telegrab
Environment="PATH=/opt/telegrab/venv/bin"
ExecStart=/opt/telegrab/venv/bin/python telegrab.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**3. –í–∫–ª—é—á–∏—Ç–µ:**
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegrab
sudo systemctl start telegrab
sudo systemctl status telegrab
```

### HTTPS —á–µ—Ä–µ–∑ nginx

**1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx:**
```bash
sudo apt install -y nginx
```

**2. –ö–æ–Ω—Ñ–∏–≥:**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 86400;
    }
}
```

**3. SSL:**
```bash
sudo ln -s /etc/nginx/sites-available/telegrab /etc/nginx/sites-enabled/
sudo certbot --nginx -d your-domain.com
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏
tail -f /tmp/telegrab.log
journalctl -u telegrab -f

# Health check
curl http://localhost:3000/health

# –°—Ç–∞—Ç—É—Å
curl -H "X-API-Key: key" http://localhost:3000/telegram_status
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegrab/
‚îú‚îÄ‚îÄ telegrab.py           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ api.py                # FastAPI + Telethon
‚îú‚îÄ‚îÄ database_v6.py        # Database v6.0
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ nginx.conf            # nginx –∫–æ–Ω—Ñ–∏–≥
‚îú‚îÄ‚îÄ telegrab.service      # Systemd —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ index.html        # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ app.js            # JavaScript –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ telegrab_v6.db    # –ë–î v6
‚îÇ   ‚îî‚îÄ‚îÄ telegrab_*.session # –°–µ—Å—Å–∏–∏ Telegram
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ auto-update.sh    # –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    ‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
```

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues:** https://github.com/JeBance/telegrab/issues
- **Wiki:** https://github.com/JeBance/telegrab/wiki

---

**Telegrab v6.0** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –¥–ª—è –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–∏—Ö Telegram —Å–æ–æ–±—â–µ–Ω–∏–π üöÄ
